<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->

<configuration>
    <configSections>
        <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
    </configSections>

    <appSettings>

        <!--==================================-->
        <!-- 1) CKAN Data Catalog Settings    -->
        <!--==================================-->

        <!-- The CKAN repository to use. -->
        <add key="Repository" value="colorado.ckan.net"/>

        <!-- The theme to use.  Requires folders Content/Theme/<name> and Views/Theme/<name> for each part of the theme.
         To get started on creating a theme copy the Default folders.-->
        <add key="Theme" value="Denver"/>

        <!-- The CKAN group that the catalog will be restricted to. -->
        <add key="Group" value="denver"/>

        <!-- If all of the packages in the group have a name prefix add it here so that the prefix is not 
         displayed on the filtered catalog. -->
        <add key="PackageTitlePrefix" value="City of Arvada: "/>

        <!-- To hide any tags from appearing in popular tags add them here.  Split multiple tags with a comma. -->
        <add key="HiddenTags" value="arvada, colorado"/>

        <!-- The actions to take for each resource type.  The default action for a resource is "Download"
         but additional actions can be created if you want different actions available for each resource type. -->
        <add key="ResourceType.REST.Title" value="REST Data Service"/>
        <add key="ResourceType.REST.Actions" value="action=Details"/>

        <add key="ResourceType.APP.Title" value="Application"/>
        <add key="ResourceType.APP.Actions" value="action=Open"/>

        <add key="ResourceType.KML.Title" value="Keyhole markup language (Google Earth)"/>
        <add key="ResourceType.KML.Actions" value="action=Download/Open with Google Earth|
                                               action=Open with Google Maps;url=http://maps.google.com/maps?q={url}|
                                               action=Open with Bing Maps;url=http://www.bing.com/maps/?mapurl={url}"/>

        <add key="ResourceType.PDF.Title" value="Adobe Portable Document Format"/>
        <add key="ResourceType.PDF.Actions" value="action=Open"/>

        <add key="ResourceType.SHP.Title" value="ESRI Shapefile"/>
        <add key="ResourceType.SHP.Actions" value="action=Download"/>

        <!-- - - - - - - - - -  -->
        <!-- Home page settings -->
        <!-- - - - - - - - - -  -->
        <add key="Home.FeaturedPackagesEnabled" value="false"/>
        <add key="Home.FeaturedPackagesTag" value="featured"/>
        <add key="Home.FeaturedPackagesLimit" value="5"/>
        <add key="Home.RecentlyUpdatedPackagesEnabled" value="true"/>
        <!--<add key="Home.BrowseAllPackagesEnabled" value="true"/>-->

        <!-- - - - - - - - - - - - - - -  -->
        <!-- Search results page settings -->
        <!-- - - - - - - - - - - - - - -  -->
        
        <!-- The number of search results to show per page -->
        <add key="Search.ResultsPerPage" value="5"/>

        <!-- - - - - - - - - - - - -->
        <!-- Package page settings -->
        <!-- - - - - - - - - - - - -->

        <!-- Package revisions RSS feed -->
        <add key="Package.RSSFeedEnabled" value="true"/>
        <add key="Package.RSSFeedDays" value="14"/>
        
        <!-- Friendly labels for extra package fields -->
        <add key="Package.Extra.level_of_government" value="Level of Government"/>
        <add key="Package.Extra.agency" value="Agency"/>
        <add key="Package.Extra.update_frequency" value="Update Frequency"/>
        <add key="Package.Extra.temporal_coverage-from" value="Temporal Coverage (From)"/>
        <add key="Package.Extra.temporal_coverage-to" value="Temporal Coverage (To)"/>

        <!-- - - - - - - - - - - - - -->
        <!-- CKAN API cache settings -->
        <!-- - - - - - - - - - - - - -->
        
        <!-- The popular tags and the recent revisions widget require a retrieval of all packages in the CKAN group.  It is 
        recommended that this be cached for long duration to avoid pulling all packages frequently. -->
        <add key="AllPackagesCacheDuration" value="60"/> <!-- Minutes, 0 for no caching. -->

        <!-- The length of time to cache license details for all licenses in the repository. -->
        <add key="AllLicensesCacheDuration" value="60"/> <!-- Minutes, 0 for no caching. -->

        <!-- The length of time to cache featured packages. -->
        <add key="FeaturedPackagesCacheDuration" value="60"/> <!-- Minutes, 0 for no caching. -->

        <!-- The length of time to cache search results. -->
        <add key="SearchResultsCacheDuration" value="5"/> <!-- Minutes, 0 for no caching. -->

        <!-- The length of time to cache package details. -->
        <add key="PackageCacheDuration" value="5"/> <!-- Minutes, 0 for no caching. -->

        <!--================================-->
        <!-- End CKAN Data Catalog Settings -->
        <!--================================-->

        <add key="ClientValidationEnabled" value="true"/>
        <add key="UnobtrusiveJavaScriptEnabled" value="true"/>

    </appSettings>

    <!--===========================-->
    <!-- 2) Memory cache settings  -->
    <!--===========================-->

    <system.runtime.caching>
        <memoryCache>
            <namedCaches>
                <add name="default" cacheMemoryLimitMegabytes="0" physicalMemoryLimitPercentage="0"></add>
                <!-- cacheMemoryLimitMegabytes : An integer value that specifies the maximum allowable size, in megabytes, 
                        that an instance of a MemoryCache can grow to. The default value is 0, which means that the 
                        autosizing heuristics of the MemoryCache class are used by default. -->
                <!-- physicalMemoryLimitPercentage : An integer value between 0 and 100 that specifies the maximum percentage
                        of physically installed computer memory that can be consumed by the cache. The default value is 0, 
                        which means that the autosizing heuristics of the MemoryCache class are used by default. -->
            </namedCaches>
        </memoryCache>
    </system.runtime.caching>

    <!--===========================-->
    <!-- End Memory cache settings -->
    <!--===========================-->

    <!--=================-->
    <!-- 3) Log settings -->
    <!--=================-->
    <log4net>
        <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
            <file value="Logs//app.log" />
            <appendToFile value="true" />
            <datePattern value="yyyyMMdd" />
            <rollingStyle value="Composite" />
            <maximumFileSize value="5MB" />
            <maxSizeRollBackups value="-1" />
            <filter type="log4net.Filter.LevelRangeFilter">
                <acceptOnMatch value="true" />
                <levelMin value="WARN" />
                <levelMax value="FATAL" />
            </filter>
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%-5p %-25d thr:%-5t %9rms %c{1},%M: %m%n" />
            </layout>
            <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
        </appender>

        <appender name="TraceAppender" type="log4net.Appender.TraceAppender">
            <filter type="log4net.Filter.LevelRangeFilter">
                <acceptOnMatch value="true"/>
                <levelMin value="DEBUG"/>
                <levelMax value="FATAL"/>
            </filter>
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%date{yyyy-MM-dd HH:mm:ss} %-5level %c{1},%M: %message%newline" />
            </layout>
        </appender>

        <root>
            <level value="ALL" />
            <appender-ref ref="RollingLogFileAppender" />
            <appender-ref ref="TraceAppender" />
        </root>
    </log4net>
    <!--==================-->
    <!-- End Log settings -->
    <!--==================-->

    <system.web>
        <compilation debug="true" targetFramework="4.0">
            <assemblies>
                <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
                <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
                <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
                <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
                <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
            </assemblies>
        </compilation>

        <pages>
            <namespaces>
                <add namespace="System.Web.Helpers" />
                <add namespace="System.Web.Mvc" />
                <add namespace="System.Web.Mvc.Ajax" />
                <add namespace="System.Web.Mvc.Html" />
                <add namespace="System.Web.Routing" />
                <add namespace="System.Web.WebPages"/>
            </namespaces>
        </pages>
    </system.web>

    <system.webServer>
        <validation validateIntegratedModeConfiguration="false"/>
        <modules runAllManagedModulesForAllRequests="true"/>
    </system.webServer>

    <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <dependentAssembly>
                <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
                <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
            </dependentAssembly>
        </assemblyBinding>
    </runtime>
</configuration>
